var ls=window.localStorage;(function(a){var b=a.fn.LongPoling=function(d){var c=true;var f=a.extend({nomeDaVariavelLocalStorage:"dados",url:"",tempoCarregamento:1000,metodo:"POST",dataHttp:{},objetoParaPreencher:"",receberDados:null},d);function h(i){a("#tabelaCorpo").append(i);a("#carregando").hide()}function g(){if(c==true){a.ajax({type:f.metodo,url:f.url,async:true,cache:false,timeout:50000,data:f.dataHttp,success:f.receberDados,error:function(i,k,j){h(k+" ("+j+")");setTimeout(g,10000)}})}}window.setInterval(g,f.tempoCarregamento);function e(){a.ajax({type:f.metodo,url:f.url,async:true,cache:false,timeout:50000,data:f.dataHttp,success:f.receberDados,error:function(i,k,j){h(k+" ("+j+")");setTimeout(g,10000)}})}window.onfocus=function(){c=true};window.onblur=function(){c=false};e();document.addEventListener("visibilitychange",function(){if(document.visibilityState=="visible"){c=true;e()}else{c=false}},false);return this.each(function(){return ls.getItem(f.nomeDaVariavelLocalStorage)})}}(jQuery));